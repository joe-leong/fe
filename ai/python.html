<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PYTHON | 小梁の前端空间</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/fe/img/logo.png">
    <meta name="description" content="前端工程">
    <meta name="keywords" content="前端空间">
    
    <link rel="preload" href="/fe/assets/css/0.styles.2519444e.css" as="style"><link rel="preload" href="/fe/assets/js/app.cbf9cdf1.js" as="script"><link rel="preload" href="/fe/assets/js/2.17d60f83.js" as="script"><link rel="preload" href="/fe/assets/js/1.6a888610.js" as="script"><link rel="preload" href="/fe/assets/js/23.2985f3df.js" as="script"><link rel="prefetch" href="/fe/assets/js/10.a9d975be.js"><link rel="prefetch" href="/fe/assets/js/11.1b1030c8.js"><link rel="prefetch" href="/fe/assets/js/12.c1aff2a0.js"><link rel="prefetch" href="/fe/assets/js/13.08aa9917.js"><link rel="prefetch" href="/fe/assets/js/14.59076001.js"><link rel="prefetch" href="/fe/assets/js/15.a6074940.js"><link rel="prefetch" href="/fe/assets/js/16.d3f28060.js"><link rel="prefetch" href="/fe/assets/js/17.ef2a2a56.js"><link rel="prefetch" href="/fe/assets/js/18.6de233c4.js"><link rel="prefetch" href="/fe/assets/js/19.d6922f6a.js"><link rel="prefetch" href="/fe/assets/js/20.747060c8.js"><link rel="prefetch" href="/fe/assets/js/21.efedac07.js"><link rel="prefetch" href="/fe/assets/js/22.deb2fa6d.js"><link rel="prefetch" href="/fe/assets/js/24.2971c9fc.js"><link rel="prefetch" href="/fe/assets/js/25.8482b829.js"><link rel="prefetch" href="/fe/assets/js/26.5901c0a1.js"><link rel="prefetch" href="/fe/assets/js/27.9428307d.js"><link rel="prefetch" href="/fe/assets/js/28.10c81db0.js"><link rel="prefetch" href="/fe/assets/js/29.be24eeea.js"><link rel="prefetch" href="/fe/assets/js/3.4bfb056a.js"><link rel="prefetch" href="/fe/assets/js/30.157dcc76.js"><link rel="prefetch" href="/fe/assets/js/31.1ad3e61d.js"><link rel="prefetch" href="/fe/assets/js/32.18531a2e.js"><link rel="prefetch" href="/fe/assets/js/33.0db46594.js"><link rel="prefetch" href="/fe/assets/js/34.501aa0f6.js"><link rel="prefetch" href="/fe/assets/js/35.1aa3c8da.js"><link rel="prefetch" href="/fe/assets/js/36.6af249a0.js"><link rel="prefetch" href="/fe/assets/js/37.746536be.js"><link rel="prefetch" href="/fe/assets/js/38.42c884ea.js"><link rel="prefetch" href="/fe/assets/js/4.daf19725.js"><link rel="prefetch" href="/fe/assets/js/5.eff0709b.js"><link rel="prefetch" href="/fe/assets/js/6.ec81d580.js"><link rel="prefetch" href="/fe/assets/js/7.86371d52.js"><link rel="prefetch" href="/fe/assets/js/vendors~docsearch.03d43e08.js">
    <link rel="stylesheet" href="/fe/assets/css/0.styles.2519444e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe/" class="home-link router-link-active"><img src="/fe/img/logo.png" alt="小梁の前端空间" class="logo"> <span class="site-name can-hide">小梁の前端空间</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe/index.html" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><span class="title">AI</span> <span class="arrow down"></span></button> <button type="button" aria-label="AI" class="mobile-dropdown-title"><span class="title">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/ai/python.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/coding/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/HTTP.html" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/datastructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/algorithm.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/node.html" class="nav-link">
  Node
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/frame/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/react15.html" class="nav-link">
  React15
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/react16.html" class="nav-link">
  React16
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/vue3.x.html" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/vue2.x.html" class="nav-link">
  Vue2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/engineering/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/fe/engineering/vite.html" class="nav-link">
  vite
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="npm" class="dropdown-title"><span class="title">npm</span> <span class="arrow down"></span></button> <button type="button" aria-label="npm" class="mobile-dropdown-title"><span class="title">npm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/eslint-config-q-eslint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/q-markdownlint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdownlint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/commitlint-config-q-commitlint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  commitlint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/q-stylelint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  stylelint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://www.npmjs.com/package/q-lint" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://joe-leong.github.io/q-hooks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hooks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/joe-leong/fe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe/index.html" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><span class="title">AI</span> <span class="arrow down"></span></button> <button type="button" aria-label="AI" class="mobile-dropdown-title"><span class="title">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/ai/python.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/coding/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/HTTP.html" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/datastructure.html" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/algorithm.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/fe/coding/node.html" class="nav-link">
  Node
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/frame/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/react15.html" class="nav-link">
  React15
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/react16.html" class="nav-link">
  React16
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/vue3.x.html" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/fe/frame/vue2.x.html" class="nav-link">
  Vue2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/engineering/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/fe/engineering/vite.html" class="nav-link">
  vite
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="npm" class="dropdown-title"><span class="title">npm</span> <span class="arrow down"></span></button> <button type="button" aria-label="npm" class="mobile-dropdown-title"><span class="title">npm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/eslint-config-q-eslint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/q-markdownlint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdownlint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/commitlint-config-q-commitlint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  commitlint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/q-stylelint-config" target="_blank" rel="noopener noreferrer" class="nav-link external">
  stylelint-config
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://www.npmjs.com/package/q-lint" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://joe-leong.github.io/q-hooks" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hooks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/joe-leong/fe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PYTHON</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/ai/python.html#字典合并" class="sidebar-link">字典合并</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#字典取值" class="sidebar-link">字典取值</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#列表推导式" class="sidebar-link">列表推导式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#参数解包" class="sidebar-link">参数解包</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#lambda函数" class="sidebar-link">Lambda函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#装饰器" class="sidebar-link">装饰器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#上下文管理器-with" class="sidebar-link">上下文管理器 - with</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#pathlib-现代文件操作" class="sidebar-link">pathlib 现代文件操作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#异步编程" class="sidebar-link">异步编程</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe/ai/python.html#异步生成器-yield" class="sidebar-link">异步生成器 yield</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="字典合并"><a href="#字典合并" class="header-anchor">#</a> 字典合并</h2> <div class="language-py extra-class"><pre class="language-py"><code>tool_result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;weather&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;晴天&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;temperature&quot;</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span>
agent_info <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;time&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;2024-01-01&quot;</span><span class="token punctuation">}</span>

result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">**</span>tool_result<span class="token punctuation">,</span> <span class="token operator">**</span>agent_info<span class="token punctuation">}</span>
result <span class="token operator">=</span> tool_result <span class="token operator">|</span> agent_info  （Python <span class="token number">3.9</span><span class="token operator">+</span>）
<span class="token comment"># 结果：{&quot;weather&quot;: &quot;晴天&quot;, &quot;temperature&quot;: 20, &quot;status&quot;: &quot;success&quot;, &quot;time&quot;: &quot;2024-01-01&quot;}</span>
</code></pre></div><h2 id="字典取值"><a href="#字典取值" class="header-anchor">#</a> 字典取值</h2> <div class="language-py extra-class"><pre class="language-py"><code>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Agent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tools&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;calc&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
tool_count <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;tools&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 没有则返回空列表</span>

<span class="token comment"># 更高级：设置默认值</span>
config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;model&quot;</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;model&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;temperature&quot;</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;temperature&quot;</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;max_tokens&quot;</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;max_tokens&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="列表推导式"><a href="#列表推导式" class="header-anchor">#</a> 列表推导式</h2> <div class="language-py extra-class"><pre class="language-py"><code>tool_results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

squared <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> tool_results<span class="token punctuation">]</span>
<span class="token comment"># 结果 [1, 4, 9, 16, 25]</span>

even_squared <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> tool_results <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token comment"># 结果 [4, 16]</span>

responses <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;结果1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;failed&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;结果2&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
success_data <span class="token operator">=</span> <span class="token punctuation">[</span>r<span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span> <span class="token keyword">for</span> r <span class="token keyword">in</span> responses <span class="token keyword">if</span> r<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">]</span>
<span class="token comment">#结果 ['结果1', '结果2']</span>
</code></pre></div><h2 id="参数解包"><a href="#参数解包" class="header-anchor">#</a> 参数解包</h2> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">call_tool</span><span class="token punctuation">(</span>tool_name<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;*args接收位置参数打包为元组，**kwargs接收关键字参数打包为字典&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;调用工具：</span><span class="token interpolation"><span class="token punctuation">{</span>tool_name<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;位置参数：</span><span class="token interpolation"><span class="token punctuation">{</span>args<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;关键字参数：</span><span class="token interpolation"><span class="token punctuation">{</span>kwargs<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

call_tool<span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Python教程&quot;</span><span class="token punctuation">,</span> engine<span class="token operator">=</span><span class="token string">&quot;google&quot;</span><span class="token punctuation">,</span> limit<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment"># 结果</span>
<span class="token comment"># 调用工具：search</span>
<span class="token comment"># 位置参数：('Python教程',)</span>
<span class="token comment"># 关键字参数：{'engine': 'google', 'limit': 10}</span>

tool_params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;engine&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;bing&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;limit&quot;</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">}</span>
call_tool<span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;AI Agent&quot;</span><span class="token punctuation">,</span> <span class="token operator">**</span>tool_params<span class="token punctuation">)</span>
<span class="token comment"># 结果</span>
<span class="token comment"># 调用工具：search</span>
<span class="token comment"># 位置参数：('AI Agent',)</span>
<span class="token comment"># 关键字参数：{'engine': 'bing', 'limit': 5}</span>
</code></pre></div><h2 id="lambda函数"><a href="#lambda函数" class="header-anchor">#</a> Lambda函数</h2> <p><code>临时函数 匿名 可接收或不接收参数</code></p> <div class="language-py extra-class"><pre class="language-py"><code>tools <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;搜索&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;priority&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;time&quot;</span><span class="token punctuation">:</span> <span class="token number">2.1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;计算器&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;priority&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;time&quot;</span><span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;数据库&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;priority&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;time&quot;</span><span class="token punctuation">:</span> <span class="token number">3.5</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment"># 按优先级排序</span>
tools<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token string">&quot;priority&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 结果</span>
<span class="token comment"># [{'name': '计算器', 'priority': 1, 'time': 0.1}, {'name': '数据库', 'priority': 2, 'time': 3.5}, {'name': '搜索', 'priority': 3, 'time': 2.1}]</span>

<span class="token comment"># 按执行时间过滤</span>
fast_tools <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">2.0</span><span class="token punctuation">,</span> tools<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 结果</span>
<span class="token comment"># [{'name': '计算器', 'priority': 1, 'time': 0.1}]</span>

<span class="token comment"># 动态创建简单函数</span>
get_priority <span class="token operator">=</span> <span class="token keyword">lambda</span> tool<span class="token punctuation">:</span> tool<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;priority&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
priorities <span class="token operator">=</span> <span class="token punctuation">[</span>get_priority<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">for</span> t <span class="token keyword">in</span> tools<span class="token punctuation">]</span>
<span class="token comment"># 结果</span>
<span class="token comment"># [3, 1, 2]</span>
</code></pre></div><h2 id="装饰器"><a href="#装饰器" class="header-anchor">#</a> 装饰器</h2> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> time
<span class="token keyword">from</span> functools <span class="token keyword">import</span> wraps
<span class="token comment"># wraps保留的是函数原信息，不会被装饰器覆盖</span>
<span class="token comment"># 保留的属性包括</span>
<span class="token comment"># __name__      # 函数名</span>
<span class="token comment"># __doc__       # 文档字符串</span>
<span class="token comment"># __module__    # 模块名</span>
<span class="token comment"># __annotations__ # 类型注解</span>
<span class="token comment"># __qualname__  # 限定名称</span>
<span class="token comment"># __dict__      # 函数的自定义属性</span>
<span class="token keyword">def</span> <span class="token function">timer</span><span class="token punctuation">(</span>origin_func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@wraps</span><span class="token punctuation">(</span>origin_func<span class="token punctuation">)</span> <span class="token comment">#保留原函数信息</span>
    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
        result <span class="token operator">=</span> origin_func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>origin_func<span class="token punctuation">.</span>__name__<span class="token punctuation">}</span></span><span class="token string"> 耗时：</span><span class="token interpolation"><span class="token punctuation">{</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>start<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">秒&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> result
    <span class="token keyword">return</span> wrapper

<span class="token decorator annotation punctuation">@timer</span>
<span class="token keyword">def</span> <span class="token function">call_llm_api</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">&quot;回复内容&quot;</span>
</code></pre></div><h2 id="上下文管理器-with"><a href="#上下文管理器-with" class="header-anchor">#</a> 上下文管理器 - with</h2> <p><code>使用with语法读取文件后会自动关闭文件，释放资源</code></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;nodemon.json&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    config <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 同时读写多个文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;input.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f_in<span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;output.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f_out<span class="token punctuation">:</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> f_in<span class="token punctuation">:</span>
        f_out<span class="token punctuation">.</span>write<span class="token punctuation">(</span>line<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="pathlib-现代文件操作"><a href="#pathlib-现代文件操作" class="header-anchor">#</a> pathlib 现代文件操作</h2> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Path

data_dir <span class="token operator">=</span> Path<span class="token punctuation">(</span><span class="token string">'./agent_memory'</span><span class="token punctuation">)</span>
data_dir<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment">#如果目录不存在则创建目录</span>

<span class="token comment"># 遍历所有记忆文件</span>
<span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> data_dir<span class="token punctuation">.</span>glob<span class="token punctuation">(</span><span class="token string">&quot;*.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 支持通配符</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;处理记忆文件：</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">file</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment"># 读写文件</span>
memory_file <span class="token operator">=</span> data_dir <span class="token operator">/</span> <span class="token string">&quot;session_1.json&quot;</span>
memory_file<span class="token punctuation">.</span>write_text<span class="token punctuation">(</span><span class="token string">'{&quot;data&quot;:&quot;记忆内容&quot;}'</span><span class="token punctuation">)</span> <span class="token comment"># 写入内容</span>
content <span class="token operator">=</span> memory_file<span class="token punctuation">.</span>read_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 读取内容</span>
</code></pre></div><h2 id="异步编程"><a href="#异步编程" class="header-anchor">#</a> 异步编程</h2> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> aiohttp
<span class="token keyword">import</span> time

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">fetch_url_async</span><span class="token punctuation">(</span>session<span class="token punctuation">,</span> url<span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token string">'get'</span><span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;模拟一个耗时的网络请求（异步版本）&quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;开始异步获取: </span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">{</span>method<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token comment"># 注意：这里我们使用 aiohttp 的异步 get 方法，并用 await 等待</span>
    http_method <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>session<span class="token punctuation">,</span>method<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> http_method<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">as</span> response<span class="token punctuation">:</span>
        <span class="token comment"># 模拟处理响应也需要时间</span>
        <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># 使用 asyncio.sleep 模拟 I/O 等待，它不会阻塞线程</span>
        text <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;完成异步获取: </span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;来自 </span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string"> 的数据 (长度: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main_async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'url'</span><span class="token punctuation">:</span><span class="token string">'http://example.com'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'url'</span><span class="token punctuation">:</span><span class="token string">'http://example.com'</span><span class="token punctuation">,</span><span class="token string">'method'</span><span class="token punctuation">:</span><span class="token string">'post'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
    
    <span class="token keyword">async</span> <span class="token keyword">with</span> aiohttp<span class="token punctuation">.</span>ClientSession<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>  <span class="token comment"># 创建异步 HTTP 会话</span>
        <span class="token comment"># 为每个 URL 创建一个任务（Task）</span>
        tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> url <span class="token keyword">in</span> urls<span class="token punctuation">:</span>
            <span class="token comment"># create_task 会将协程加入事件循环，立即开始调度</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            task <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>fetch_url_async<span class="token punctuation">(</span>session<span class="token punctuation">,</span> url<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>url<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'method'</span><span class="token punctuation">,</span><span class="token string">'get'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            tasks<span class="token punctuation">.</span>append<span class="token punctuation">(</span>task<span class="token punctuation">)</span>
        
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;所有任务已创建，开始并发执行...&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 使用 asyncio.gather 并发运行所有任务，并等待它们全部完成</span>
        <span class="token comment"># gather 返回一个结果列表，顺序与传入的任务顺序一致</span>
        results <span class="token operator">=</span> <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>gather<span class="token punctuation">(</span><span class="token operator">*</span>tasks<span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> results

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># asyncio.run() 是启动事件循环并运行顶层协程的简便方法</span>
    final_results <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main_async<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;\n异步版本总耗时: </span><span class="token interpolation"><span class="token punctuation">{</span>end <span class="token operator">-</span> start<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> 秒&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> res <span class="token keyword">in</span> final_results<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre></div><h2 id="异步生成器-yield"><a href="#异步生成器-yield" class="header-anchor">#</a> 异步生成器 yield</h2> <p><code>yield返回generator</code></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">stream_llm_response</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 模拟流式返回</span>
    words <span class="token operator">=</span> prompt<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> word <span class="token keyword">in</span> words<span class="token punctuation">:</span>
        <span class="token keyword">yield</span> word <span class="token operator">+</span> <span class="token string">&quot; &quot;</span>
        <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 模拟延迟</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">for</span> chunk <span class="token keyword">in</span> stream_llm_response<span class="token punctuation">(</span><span class="token string">&quot;你好 我是AI助手 哈哈&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> flush<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 逐个词打印</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/joe-leong/fe/edit/master/docs/ai/python.md" target="_blank" rel="noopener noreferrer">为该章节纠错</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2026/2/28 07:07:34</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/fe/assets/js/app.cbf9cdf1.js" defer></script><script src="/fe/assets/js/2.17d60f83.js" defer></script><script src="/fe/assets/js/1.6a888610.js" defer></script><script src="/fe/assets/js/23.2985f3df.js" defer></script>
  </body>
</html>
