(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{321:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react16"}},[t._v("#")]),t._v(" React16")]),t._v(" "),a("h2",{attrs:{id:"架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[t._v("#")]),t._v(" 架构")]),t._v(" "),a("p",[t._v("React16架构分为三层：")]),t._v(" "),a("ul",[a("li",[t._v("Scheduler（调度器）- 调度任务的优先级，高优先级优先进入"),a("code",[t._v("Reconciler")])]),t._v(" "),a("li",[t._v("Reconciler（协调器）- 负责找出变化的组件")]),t._v(" "),a("li",[t._v("Renderer（渲染器）- 负责将变化的组件渲染到页面上")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("相比较于15，增加了Scheduler调度任务")])]),t._v(" "),a("h3",{attrs:{id:"scheduler-调度器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scheduler-调度器"}},[t._v("#")]),t._v(" Scheduler（调度器）")]),t._v(" "),a("p",[t._v("如果需要实现异步，那么就需要知道浏览器是否有剩余时间，在浏览器中有原生的API"),a("code",[t._v("requestIdleCallback")]),t._v("，但是该api存在以下问题")]),t._v(" "),a("ul",[a("li",[t._v("兼容性")]),t._v(" "),a("li",[t._v("触发频率不稳定，影响因素很多。比如当前tab切换后，之前tab注册的时间触发的频率会变得很低。")])]),t._v(" "),a("p",[t._v("所以React实现了"),a("code",[t._v("requestIdleCallback")]),t._v("pollyfill。除了在空闲时触发回调的功能外，还提供了多种调度优先级供任务设置。")]),t._v(" "),a("h3",{attrs:{id:"reconciler-协调器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reconciler-协调器"}},[t._v("#")]),t._v(" Reconciler（协调器）")]),t._v(" "),a("p",[t._v("16+版本中，"),a("code",[t._v("Reconciler")]),t._v(" 更新工作从递归变成了可中断的循环过程。每次循环都会调用"),a("code",[t._v("shouldYield")]),t._v("获取当前是否有剩余时间。并且"),a("code",[t._v("Reconciler")]),t._v("和"),a("code",[t._v("Renderer")]),t._v("不再是交替工作。当"),a("code",[t._v("Schuduler")]),t._v("把任务交给"),a("code",[t._v("Reconciler")]),t._v("之后，"),a("code",[t._v("Reconciler")]),t._v("会为变化的虚拟DOM打上标记（增/删/更新）")]),t._v(" "),a("p",[t._v("整个过程都在内存中进行。只有当所有组件都完成"),a("code",[t._v("Reconciler")]),t._v("的工作，再会统一交给"),a("code",[t._v("Renderer")]),t._v("进行渲染工作")]),t._v(" "),a("p",[a("code",[t._v("Reconciler")]),t._v(" 和 "),a("code",[t._v("Schuduler")]),t._v(" 被称为 "),a("code",[t._v("render")]),t._v(" 阶段，具体流程如下：")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("beginwork")]),t._v(" 递")]),t._v(" "),a("ul",[a("li",[t._v("从 "),a("code",[t._v("rootFiber")]),t._v(" 开始 "),a("code",[t._v("child")]),t._v("，如果遇到函数组件或者类组件则调用渲染函数生成新的 "),a("code",[t._v("child")]),t._v("(Fiber Array)")]),t._v(" "),a("li",[a("code",[t._v("reconcilerChildren")]),t._v("，对已存在的child与生成的child进行diff，如果是单节点，直接进入更新单节点，如果是数组，则会进入diff逻辑，尽可能复用已有Fiber，创建的effectTag包含更新、删除并且更新 "),a("code",[t._v("父Fiber")]),t._v(" 的tag，如果是新建的话就不需要打tag\n"),a("code",[t._v("diff算法")]),t._v(":\n"),a("ul",[a("li",[a("code",[t._v("oldChild")]),t._v(" 与新渲染产生的child循序遍历，比较tag与key，如果相同则复用，判断props是否需要更新，需要更新则标记 "),a("code",[t._v("update")]),t._v(" 并更新父节点 "),a("code",[t._v("effectTag")]),t._v("，更新"),a("code",[t._v("lastPlaceIndex")])]),t._v(" "),a("li",[t._v("一旦遇到不能复用，则把"),a("code",[t._v("oldChild")]),t._v("创建map，遍历新节点，在map中查找可复用节点,如果没找到则新建 "),a("code",[t._v("Fiber")])]),t._v(" "),a("li",[t._v("遍历map，打上 "),a("code",[t._v("delete")]),t._v(" 标记")])])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("completework")]),t._v(" 归")]),t._v(" "),a("ul",[a("li",[t._v("处理flag：把 "),a("code",[t._v("Fiber")]),t._v(" 自身的 "),a("code",[t._v("flag")]),t._v(" 以及 "),a("code",[t._v("subtreeFlag")]),t._v(" 冒泡到 "),a("code",[t._v("父Fiber")])]),t._v(" "),a("li",[t._v("处理 "),a("code",[t._v("Fiber")]),t._v(" 的 "),a("code",[t._v("stateNode")]),t._v("，如果没有则需要创建，并且把子孙节点append到当前DOM节点下，存在的话就更新props、事件绑定等")]),t._v(" "),a("li",[t._v("把每个 "),a("code",[t._v("Fiber")]),t._v(" 的 "),a("code",[t._v("Effect")]),t._v(" 添加到 "),a("code",[t._v("父Fiber")]),t._v(" 上组成 "),a("code",[t._v("effectList")]),t._v("，在commit阶段会遍历单向链执行对应操作")])])])]),t._v(" "),a("h3",{attrs:{id:"renderer-渲染器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#renderer-渲染器"}},[t._v("#")]),t._v(" Renderer（渲染器）")]),t._v(" "),a("p",[a("code",[t._v("Renderer")]),t._v("根据"),a("code",[t._v("Reconciler")]),t._v("的标记，同步执行对应的DOM操作\n此阶段也称为"),a("code",[t._v("commit 阶段")]),t._v("，分为三个步骤：")]),t._v(" "),a("h4",{attrs:{id:"before-mutation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-mutation"}},[t._v("#")]),t._v(" before mutation")]),t._v(" "),a("p",[t._v("遍历 "),a("code",[t._v("effectList")]),t._v(" 处理 "),a("code",[t._v("DOM")]),t._v(" 节点 "),a("code",[t._v("渲染/删除")]),t._v(" 后的 "),a("code",[t._v("聚焦/失焦")]),t._v(" 逻辑，调用 "),a("code",[t._v("getSnapShotBeforeUpdate")]),t._v(" 生命周期钩子，调度 "),a("code",[t._v("useEffect")]),t._v(" （使用SchedulerCallback调度）")]),t._v(" "),a("h4",{attrs:{id:"mutation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mutation"}},[t._v("#")]),t._v(" mutation")]),t._v(" "),a("ul",[a("li",[t._v("更新文本节点的content")]),t._v(" "),a("li",[t._v("更新ref")]),t._v(" "),a("li",[t._v("根据 "),a("code",[t._v("effectTag")]),t._v(" 进行对应处理，包含操作：移动、插入、更新、删除等组合")]),t._v(" "),a("li",[t._v("更新 "),a("code",[t._v("DOM")]),t._v(" props、properties（遍历pendingProps，数据在completeWork阶段完成处理）")]),t._v(" "),a("li",[t._v("如果是 "),a("code",[t._v("FC")]),t._v(" 则需要调用 "),a("code",[t._v("useLayout")]),t._v(" 的销毁函数")]),t._v(" "),a("li",[t._v("完成后再进入 "),a("code",[t._v("layout")]),t._v(" 阶段前需要把current指针切换，因为 "),a("code",[t._v("mutation")]),t._v(" 阶段会调用 "),a("code",[t._v("componentWillUnmount")]),t._v("，此时的 "),a("code",[t._v("DOM")]),t._v(" 还是更新前的")])]),t._v(" "),a("h4",{attrs:{id:"layout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#layout"}},[t._v("#")]),t._v(" layout")]),t._v(" "),a("p",[t._v("到达这个阶段，已经完成 "),a("code",[t._v("离屏DOM")]),t._v(" 的布局，只是浏览器尚未完成渲染")]),t._v(" "),a("ul",[a("li",[t._v("遍历 "),a("code",[t._v("effectList")]),t._v(" 执行 "),a("code",[t._v("commitLayoutEffcts")]),t._v(" 函数：赋值 "),a("code",[t._v("ref")]),t._v("、调用生命周期钩子和hooks")]),t._v(" "),a("li",[t._v("执行 "),a("code",[t._v("useLayout")]),t._v(" 回调函数，调度 "),a("code",[t._v("useEffect")]),t._v(" 的销毁函数以及回调函数")]),t._v(" "),a("li",[t._v("类组件 "),a("code",[t._v("this.setState")]),t._v(" 的第二个回调函数也会执行")]),t._v(" "),a("li",[t._v("执行的生命周期钩子："),a("code",[t._v("componentDidMount")]),t._v(", "),a("code",[t._v("componentDidUpdate")])])]),t._v(" "),a("h2",{attrs:{id:"生命周期-16-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期-16-4"}},[t._v("#")]),t._v(" 生命周期（16.4+）")]),t._v(" "),a("h3",{attrs:{id:"创建阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建阶段"}},[t._v("#")]),t._v(" 创建阶段")]),t._v(" "),a("ul",[a("li",[t._v("constructor\n实例过程中自动调用的方法，在方法内部通过"),a("code",[t._v("super")]),t._v("关键字获取来自父组件的"),a("code",[t._v("props")])]),t._v(" "),a("li",[t._v("getDerivedStateFromProps\n新增的生命周期，是一个静态的方法，因此不能访问到组件的实例\n"),a("br"),t._v("执行时机：组件创建和更新阶段，不论是"),a("code",[t._v("props")]),t._v("还是"),a("code",[t._v("state")]),t._v("变化，都会调用\n"),a("br"),t._v("参数：（props，state），即将更新的"),a("code",[t._v("props")]),t._v("，上一个状态的"),a("code",[t._v("state")])]),t._v(" "),a("li",[t._v("render\n类组件用于渲染"),a("code",[t._v("DOM")]),t._v("结构的方法，可以访问组件"),a("code",[t._v("state")]),t._v("和"),a("code",[t._v("props")]),t._v("属性")]),t._v(" "),a("li",[t._v("componentDidMount\n组件挂载到真实"),a("code",[t._v("DOM")]),t._v("后执行")])]),t._v(" "),a("h3",{attrs:{id:"更新阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新阶段"}},[t._v("#")]),t._v(" 更新阶段")]),t._v(" "),a("ul",[a("li",[t._v("getDerivedStateFromProps\n同上")]),t._v(" "),a("li",[t._v("shouldComponentUpdate\n基于"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")]),t._v("是否需要重新渲染组件，默认返回"),a("code",[t._v("true")])]),t._v(" "),a("li",[t._v("render\n同上")]),t._v(" "),a("li",[t._v("getSnapshotBeforeUpdate\n在"),a("code",[t._v("render")]),t._v("后执行，执行时"),a("code",[t._v("DOM")]),t._v("还没被更新\n"),a("br"),t._v("参数"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")]),t._v(",返回的参数作为"),a("code",[t._v("componentDidUpdate")]),t._v("的第三参数，目的在于获取组件更新前的一些信息，如滚动位置之类，在组件更新后可以恢复一些UI上的状态")]),t._v(" "),a("li",[t._v("componentDidUpdate\n在组件更新结束后执行，可以根据前后的"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")]),t._v("的变化做相应的操作，如获取数据，修改"),a("code",[t._v("DOM")]),t._v("样式等")])]),t._v(" "),a("h3",{attrs:{id:"卸载阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载阶段"}},[t._v("#")]),t._v(" 卸载阶段")]),t._v(" "),a("ul",[a("li",[t._v("componentWillUnmount\n用于组件卸载前，清理一些注册监听事件，或者取消订阅的网络请求等。"),a("br"),t._v("一旦一个组件实例被卸载，其不会被再次挂载，而只可能是被重新创建")])]),t._v(" "),a("h3",{attrs:{id:"与16-4-对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与16-4-对比"}},[t._v("#")]),t._v(" 与16.4-对比")]),t._v(" "),a("p",[t._v("减少了以下钩子，在现实使用中还能使用，只是增加了"),a("code",[t._v("UNDAFE_")]),t._v("前缀，原因是fiber架构，会导致render阶段会被多次执行，一下钩子可能会被多次执行")]),t._v(" "),a("ul",[a("li",[t._v("componentWillMount")]),t._v(" "),a("li",[t._v("componentWillReceiveProps")]),t._v(" "),a("li",[t._v("componentWillUpdate")])]),t._v(" "),a("h2",{attrs:{id:"v18新特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v18新特性"}},[t._v("#")]),t._v(" v18新特性")]),t._v(" "),a("h3",{attrs:{id:"新增hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增hook"}},[t._v("#")]),t._v(" 新增hook")]),t._v(" "),a("ul",[a("li",[t._v("useId\n解决了客户端和服务端id不同的问题\n原理：利用组件在组件数中的层级生成id\n用法：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"checkbox"')]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("useTransition\n在"),a("code",[t._v("React")]),t._v("中状态更新分为紧急更新和过渡更新：\n"),a("br"),t._v("紧急更新：输出、点击、拖拽需要立即响应\n"),a("br"),t._v("过渡更新：将UI从一个视图过渡到另一个视图\n"),a("br"),t._v("使用"),a("code",[t._v("useTransition")]),t._v("可以将一个任务变为非紧急状态\n用法：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 紧急任务")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSearch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 非紧急任务")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isPending "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'loading……'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 非紧急任务的状态 */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("useDeferredValue\n将任务变成非紧急任务")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("与useTrransition区别")]),t._v(" "),a("p",[t._v("useDeferredValue把任务变成了"),a("code",[t._v("延迟更新任务")]),t._v("，useTransition则是把一个状态变成了"),a("code",[t._v("延迟状态")])])]),t._v(" "),a("p",[t._v("用法：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" deferedValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDeferrefValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 紧急任务")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("List search"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("deferredValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 标记非紧急状态 */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);