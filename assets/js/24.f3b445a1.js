(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{309:function(_,t,v){"use strict";v.r(t);var a=v(14),s=Object(a.a)({},(function(){var _=this,t=_._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"http"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[_._v("#")]),_._v(" HTTP")]),_._v(" "),t("h2",{attrs:{id:"_1-响应头"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-响应头"}},[_._v("#")]),_._v(" 1. 响应头")]),_._v(" "),t("h3",{attrs:{id:"_1-1-content-disposition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-content-disposition"}},[_._v("#")]),_._v(" 1.1. Content-Disposition")]),_._v(" "),t("p",[_._v("主要用于告诉浏览器如何处理服务器返回的文件。当服务器返回一个文件的时候，浏览器默认会根据文件的 MIME 类型来决定如何处理。但是，如果服务器希望浏览器采取特定的行为，比如下载文件，就可以通过 "),t("code",[_._v("Content-Disposition")]),_._v(" 来告诉浏览器采取什么行动\n这个参数可以设置为 "),t("code",[_._v("inline")]),_._v("或者 "),t("code",[_._v("attachment")]),_._v("，前者表示直接在浏览器中打开文件，后者表示让浏览器下载文件")]),_._v(" "),t("h3",{attrs:{id:"_1-2-缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-缓存"}},[_._v("#")]),_._v(" 1.2. 缓存")]),_._v(" "),t("h4",{attrs:{id:"_1-2-1-强缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-强缓存"}},[_._v("#")]),_._v(" 1.2.1. 强缓存")]),_._v(" "),t("p",[_._v("🚧")]),_._v(" "),t("h4",{attrs:{id:"_1-2-2-协商缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-协商缓存"}},[_._v("#")]),_._v(" 1.2.2. 协商缓存")]),_._v(" "),t("p",[_._v("🚧")]),_._v(" "),t("h2",{attrs:{id:"_2-http-版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-http-版本"}},[_._v("#")]),_._v(" 2. "),t("code",[_._v("http")]),_._v(" 版本")]),_._v(" "),t("h3",{attrs:{id:"_2-1-http2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-http2"}},[_._v("#")]),_._v(" 2.1. "),t("code",[_._v("HTTP2")])]),_._v(" "),t("h4",{attrs:{id:"_2-1-1-http1-的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-http1-的问题"}},[_._v("#")]),_._v(" 2.1.1. "),t("code",[_._v("HTTP1")]),_._v(" 的问题")]),_._v(" "),t("ol",[t("li",[_._v("队头阻塞\n"),t("br"),_._v("如果仅仅使用一个连接，它需要发起请求、等待响应，之后才能发起下一个请求。在请求应答过程中，如果出现任何状况，剩下所有的工作都会被阻塞在那次请求应答之后。这就是“队头阻塞”，它会阻碍网络传输和 Web 页面渲染，直至失去响应。为了防止这种问题，现代浏览器会针对单个域名开启 6 个连接，通过各个连接分别发送请求。它实现了某种程度上的并行，但是每个连接仍会受到“队头阻塞”的影响")]),_._v(" "),t("li",[_._v("抵消的 TCP 利用\n"),t("br"),t("code",[_._v("HTTP1")]),_._v(" 并不支持多路复用，TCP 协议保证连接都能正常工作，但是不能保证它们的性能是最优的")]),_._v(" "),t("li",[_._v("臃肿的消息首部\n"),t("br"),_._v("虽然"),t("code",[_._v("HTTP1")]),_._v("提供了压缩被请求内容的机制，但是消息首部却无法压缩")]),_._v(" "),t("li",[_._v("受限的优先级设置\n"),t("br"),_._v("浏览器能指定优先级的方式是有限的：要么发起请求，要么不发起。浏览器为了先请求优先级高的资源，会推迟请求其他资源。但是优先级高的资源获取之后，在处理的过程中，浏览器并不会发起新的资源请求，所以服务器无法利用这段时间发送优先级低的资源，总的页面下载时间因此延长了")]),_._v(" "),t("li",[_._v("第三方资源\n"),t("br"),_._v("很多第三方资源都不在"),t("code",[_._v("Web")]),_._v("开发者的控制范围内，所以很可能其中有些资源的性能很差，会延迟甚至阻塞页面渲染")])]),_._v(" "),t("h4",{attrs:{id:"_2-1-2-http2-特点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-http2-特点"}},[_._v("#")]),_._v(" 2.1.2. "),t("code",[_._v("HTTP2")]),_._v(" 特点")]),_._v(" "),t("ol",[t("li",[_._v("二进制协议\n"),t("ul",[t("li",[_._v("全面采用二进制格式而非文本格式")]),_._v(" "),t("li",[_._v("方便机器解析，但是肉眼识别起来比较困难")])])]),_._v(" "),t("li",[_._v("完全多路复用，而非有序并阻塞\n"),t("ul",[t("li",[_._v("只需要一个连接即可实现并行")]),_._v(" "),t("li",[_._v("提升 "),t("code",[_._v("TCP")]),_._v(" 连接的利用率")])])]),_._v(" "),t("li",[_._v("头部压缩\n"),t("ul",[t("li",[_._v("首部被深度压缩")]),_._v(" "),t("li",[_._v("显著减少传输中的冗余字节")])])]),_._v(" "),t("li",[_._v("服务器可以将响应主动推送到客户端缓存中\n"),t("ul",[t("li",[_._v("通过静态 "),t("code",[_._v("link")]),_._v(" 标记资源")]),_._v(" "),t("li",[t("code",[_._v("http")]),_._v("头表示："),t("code",[_._v("Link: </app/script.js>; rel=preload; as=script;nopush")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("rel")]),_._v(" 表示资源是预加载的")]),_._v(" "),t("li",[t("code",[_._v("as")]),_._v(" 表明资源类型")]),_._v(" "),t("li",[t("code",[_._v("nopush")]),_._v(" 指示浏览器可能存在资源缓存，有推动能力的服务端不主动推送资源\n🚧")])])])])])]),_._v(" "),t("h4",{attrs:{id:"_2-1-3-开启http2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-开启http2"}},[_._v("#")]),_._v(" 2.1.3. 开启"),t("code",[_._v("HTTP2")])]),_._v(" "),t("ol",[t("li",[t("code",[_._v("NGINX")]),_._v(" 添加支持模块 "),t("code",[_._v("--with-http_v2_module")])]),_._v(" "),t("li",[_._v("修改监听配置 "),t("code",[_._v("listen 443 ssl http2")]),_._v("\n🚧")])]),_._v(" "),t("h3",{attrs:{id:"_2-2-http3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-http3"}},[_._v("#")]),_._v(" 2.2. "),t("code",[_._v("HTTP3")])]),_._v(" "),t("p",[_._v("🚧")])])}),[],!1,null,null,null);t.default=s.exports}}]);